---
title: "fleetEffSim"
author: "Lachlan Fox"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{fleetEffSim}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r, eval=TRUE, include=FALSE}

devtools::load_all()
```

``` {r, eval=FALSE, include=TRUE}

#library(fleetEffSim)
```


```{r setup}
library(ggplot2)
library(grattantheme)
library(magrittr)
library(dplyr)
```


# Introduction  {.unnumbered}

The *fleetEffSim* model is a model designed to estimate the costs and benefit of a fleetwide emissions standard in an Australian context. 

For more information on what a fleetwide efficiency standard is, and how it functions, the most recent federal department draft regulation impact statement provides a thorough overview, and an example of how such modeling has been used in the past: 

https://www.infrastructure.gov.au/vehicles/environment/forum/files/Vehicle_Fuel_Efficiency_RIS.pdf. 


Unlike some technology models, such as the OMEGA model (US EPA) or VOLPE model (US ...), the *fleetEffSim* model is relatively simple; focusing on estimating the likely benefits and costs of a fleetwide efficiency standard under a wide range of scenarios.

It is not a detailed technology model that provides detailed assessment of individual technology existing in the Australian vehicle fleet, and applies 'upgrade' technologies based on this assessment. Instead, the model takes given 'cost curves' as an input for broad vehicle types, and finds a least cost pathway to meeting a given emissions standard. For this reason, it does *not* provide a prediction of what technology will be used in vehicles in the future to meet a given standard. It simply provides a representation of what technology 
*could* be used to meet targets at lowest cost. 


**Chapter 1** of this document gives a brief, high level run-down of the model, from start to finish, focusing on how to use the most accessible function (```fleet_eff_sim()```)  It should prime any user who is interested in testing given scenarios of a fleetwide standard with enough detail to do so, but it does not contain significant detail about the inputs or detailed explanation of the methodology and function. 

The remaining chapters dive into the detail of how the inputs to the model were generated (**Chapter 2**), how the functions that make up the model operate (**Chapter 3**), and how the model can be used in greater detail (**Chapter 4**). If you're interested in just running some simulations relatively simply and without the nitty-gritty detail, **Chapter 1** is the place to be. However, to interrogate the assumptions made and exactly what the model does (and does not) do, **Chapters 2, 3** and **4** of this document should provide a comprehensive overview. 




# Chapter 1: The long and short of it - using the fleetEffSim model












# Chapter 2: Inputs to the *fleetEffSim* model

Like any model, the inputs to the *fleetEffSim* model are crucial to understanding what's going on under the hood. This chapter outlines the inputs to the *fleetEffSim* model, with particular attention given to the most significant inputs: the internal combustion engine (ICE) and electric vehicle (EV) cost curves. 

## What are technology cost curves?

Technology cost curves are often used to model the potential costs of a fleetwide efficiency standard. These curves provide an estimate of how expensive it is to achieve a certain reduction in carbon dioxide (for example per km travelled), and thus efficiency improvement in a given vehicle. 

At their most complex, technology cost curves can be diaggregated into very specific technologies, where each 'step' of the cost curve represents a package of technology options available for a given vehicle. More simply, cost curves can provide an estimate of how expensive it is to improve the efficiency of a given vehicle, conditional on the efficiency improvements that vehicle has already recieved. 

An example cost curve is illustrated below. This is the cost curve used for passenger vehicles, in the year 2021, in the *fleetEffSim* model. 

```{r, echo = FALSE}
# Cost curve data
cost_curves %>% 
  filter(year == 2021, 
         vehicle_group == "passenger",
         estimate == "central", 
         type == "ice") %>% 
  mutate(cumulative_cost = cumsum(incr_cost)) %>%
  ggplot(aes(x = cumulative_reduction, y = cumulative_cost)) +
  geom_point() +
  scale_y_continuous_grattan(limits = c(0, 10000)) +
  scale_x_continuous_grattan(limits = c(0, 100)) +
  geom_smooth(se = FALSE,
              span = 0.7) +
  theme_grattan(chart_type = "scatter") +
  labs(title = "Passenger vehicles technology cost curve (2021)",
       subtitle = "Technology cost and efficiency improvements for passenger vehicles",
       x = "Cost $",
       y = "% reduction in CO2 emissions/km",
       caption = "Cost curves apply to a 'base' vehicle model. This is approximately equivalent to a 2008 model I4 petrol engine vehicle.")

```

For the *fleetEffSim* model, two separate cost curves were prepared as use for input files into the model. The first of these, as detailed above, is the cost curve for combustion vehicles (ICE vehicles). These curves were prepared for three broad vehicle categories: passenger, light commercial vehicles (LCV) and sports utility vehicles (SUV), and for all years over which the model runs. These curves include technology improvements that can be incorperated to traditional combustion engine vehicles, including technologies such as low rolling resistance tires, mass reduction and aerodynamic improvements, engine improvements and non-plugin hybrid technology. 

Separate cost curves were produced for electric vehicles, for the three vehicle categories mentioned above. Unlike these ICE cost curves, these curves only contain one point for each year/vehicle category, which represents the incremental cost of switching to an electric vehicle of similar performance in that category and at that time, from a base vehicle model. 

The following sections detail how the cost curves were produced, both for ICE and EV vehicles. 

The scripts used for this process are included in the documentation of the *fleetEffSim* model, available at: https://github.com/grattan/fleeteffSim, under https://github.com/grattan/fleeteffSim/tree/main/data-raw/model_data. The folder ```cost-inputs``` documents the creation of cost curves for both EV and ICE vehicles, and the ```benefits-inputs``` folder documents inputs used in calculating the benefits of a fleetwide standard, as discussed later in this chapter. 


## ICE Cost Curves 

For this analysis, ICE cost curves are derived from EPA data produced for the OMEGA model. This model was used to aid in designing US fleetwide efficiency standard regulation. 

The OMEGA model estimates the compliance cost and reduction of co2 emissions by adding specific 'technology packages' to vehicles. A technology package is a group of technologies that together provide a reduction in co2, for a given cost. To ensure that the data has a comprehensive coverage of the range of vehicles available for purchase, and the specific cost associated with reducing emissions for a given vehicle, the technology packages are designed for 19 different light vehicle classes. Each class is specified based on a specific engine characteristic and vehicle size of what is available in the vehicle market. 

The need to break up vehicles into types is reflective of the fact that technology packages are specific to a vehicle type - for example, different technologies are available for co2 reduction (without detracting from performance) on a large commercial vehicle with a V8 engine than are available to a small passenger car with a standard inline 4 cylinder engine. Further, the same group of technologies (included in a technology package) are likely to result in different efficiency improvements when incorporated to different types of vehicles, and this is factored in by the packages. 

The technology packages must be applied sequentially, given they are based on incremental costs and emissions reductions. In part, this is due to the fact that applying new technologies to a vehicle does not result in a linear improvement to efficiency. Different technologies tend to interact in complex and non-linear ways, meaning that each combination of vehicle technologies must be individually tested to determine their effect on vehicle efficiency.  

To design the technology packages and determine how they interact with one another, the EPA uses vehicle teardown studies, the ALPHA simulation tool (a physics simulator) and the lumped parameter model (LPM, calibrated on the ALPHA model) to determine efficiency improvements. This is explained in much more detail in the documentation for the US EPA OMEGA model (https://www.epa.gov/regulations-emissions-vehicles-and-engines/optimization-model-reducing-emissions-greenhouse-gases), and the draft TAR documentation; technical documentation (https://nepis.epa.gov/Exe/ZyPDF.cgi?Dockey=P100Q3L4.pdf) and appendices (https://nepis.epa.gov/Exe/ZyPDF.cgi/P100OYCH.PDF?Dockey=P100OYCH.PDF). 

However, the result is that the technology packages must be applied in sequence to ensure that the cumulative emissions reductions are accurate.

For the *fleetEffSim* model, these EPA technology packages are used to produce simpler cost curves for the three vehicle types discussed earlier: passenger vehicles, LCV's and SUV's. The original EPA OMEGA data can be downloaded from the OMEGA model webpage, in the draft TAR analysis files. Technology package costs and efficiency improvement values are available for 2021 and 2025. 

### Generating cost curves from EPA data 

These OMEGA costs form the basis of the 'cost curves' created to estimate the marginal cost/co2 reduction that is available to cars in the Australian market. This data has historically proved to be conservative in it's estimates, tending to overestimate the efficiency improvements that can be achieved for a given cost. This is partly due to the fact that it cannot account for technology that manufacturers are yet to develop, but may prove very cost effective. This has been discussed in detail by the ICCT (https://theicct.org/sites/default/files/publications/US-LDV-tech-potential_ICCT_white-paper_22032017.pdf). 

Given the broad similarities between the Australian and US markets, using cost curves developed for the US is likely to give reasonable estimates for Australia. 

To use the OMEGA cost curves for the Australian fleet in the *fleetEffSim* model, the curves were aggregated into vehicle classes based on the characteristics of the Australia vehicle fleet, for both 2021 and 2025 model years. In order to aggregate the 19 cost curves (representing the 19 vehicle types) into these three categories, we collected data on the top selling Australia models in each vehicle category defined by the National Transport Comission (NTC) in their annual report on the emissions of the light duty Australian fleet (https://www.ntc.gov.au/sites/default/files/assets/files/Carbon-dioxide-emissions-intensity-for-new-Australian-light-vehicles-2019.pdf). 

The EPA class definitions are available on page 94-95 (section C, pages 2-3) of the appendix to the draft TAR (https://nepis.epa.gov/Exe/ZyPDF.cgi/P100OYCH.PDF?Dockey=P100OYCH.PDF). 

Car size groups used by the NTC were used to separate vehicle into the 6 vehicle classes (Small car, Standard car, Large car, Small MPV, Large MPV, and Truck) that form the basis of EPA's 19 vehicle types. Further data was collected from publicly available sources to determine the proportion of each vehicle class with different base engine configurations (as each class is further broken up into the 19 ypes based on engine characteristics).

As the vast majority of vehicle sold in Australia fall into few EPA categories, only EPA classes 1,2,4,6,7,8,11 and 13 are used in the aggregate cost curves developed. Sales weighted averages within each vehicle category (LCV, SUV, passenger) were calculated to produce representative cost curves from the EPA classes selected. The baseline emissions for each vehicle type was taken as the sales weighted average emissions for that class. 

Although this means that the cost curves produced are no longer specific to a technology pathway (as we aggregated different vehicle types which have different technology paths), the resulting cost curve is representative of the cost and co2 reduction for each vehicle category with respect to Australian sales. 

The costs of the aggregated data were converted in to Australian dollars (2021) from 2015 US dollars, adjusting for inflation.
The resulting cost curves are as follows for 2021:

```{r, echo = FALSE}
# Cost curve data
cost_curves %>% 
  filter(year == 2021,
         estimate == "central", 
         type == "ice") %>% 
  mutate(cumulative_cost = cumsum(incr_cost)) %>%
  ggplot(aes(x = cumulative_reduction, y = cumulative_cost, colour = vehicle_group)) +
  geom_point() +
  scale_y_continuous_grattan(limits = c(0, 10000)) +
  scale_x_continuous_grattan(limits = c(0, 100)) +
  geom_smooth(se = FALSE,
              span = 0.7) +
  theme_grattan(chart_type = "scatter", legend = "bottom") +
  grattan_colour_manual() +
  labs(title = "Technology cost curves (2021)",
       subtitle = "Technology cost and efficiency improvements for passenger vehicles",
       x = "Cost $",
       y = "% reduction in CO2 emissions/km",
       caption = "Cost curves apply to a 'base' vehicle model. This is approximately equivalent to a 2008 model I4 petrol engine vehicle.")

```

In order to generate cost curves for all years, data was linearly interpolated between 2021 and 2025. The OMEGA data has lower costs for many technologies in 2025 compared to 2021, to account for manufacturers 'learning' and the drop in technology cost over time. As learning curves are typically decaying exponential or similar type functions, a linear interpolation is a conservative estimate; likely underestimating price decreases in early years. 

Given the high uncertainty beyond 2025, and the likelihood that many manufacturers may prioritise the development of zero emissions vehicle technology (such as battery electric vehicles) over combustion engine technology beyond this point, cost curves are assumed to `freeze' at 2025 levels. This is conservative estimate that is likely to overestimate the costs of improving vehicle efficiency. 


## EV Cost Curves 

EV cost curves are generated for the *fleetEffSim* model through a price parity forecast for electric vehicles when compared to a base vehicle cost. 

Generating EV cost curves is a slightly more involved process than generating ICE cost curves, as this is a more 'bottom-up' approach to estimating costs, based on direct and indirect manufacturing costs, as well as battery costs. Compared to industry estimates,the EV price parity forecast remains conservative, predicting ev price parity for passenger vehicles in 2027-2028, and parity for SUV's approximately in 2032 and lcv's a fraction after that. 

The approach to generating EV cost curves can be broken into 2 main stages: estimating direct and indirect (non-battery) costs for ICE and EV's, and battery costs for EV's. A comparison between the two forecasts is then made to determine the incremental cost of electric vehicles over time, and the price parity point. 

This methodology draws heavily from UBS vehicle teardown data (https://neo.ubs.com/shared/d1wkuDlEbYPjF/), as well as methodology proposed by the ICCT (https://theicct.org/sites/default/files/publications/EV_cost_2020_2030_20190401.pdf) to forecast electric vehicle price parity in the US. 


### Direct and indirect costs (non-battery)

The approach used to forecast direct and indirect (non-battery) costs primarily relies on UBS vehicle teardown data and forecasts (https://neo.ubs.com/shared/d1wkuDlEbYPjF/, pages 26 and 43 in particular). This data provides a breakdown of vehicle component costs for a comparable small passenger ICE and EV vehicles (a Volkswagen Golf and Chevy Bolt), as well as forecast for component costs in 2025. Estimates for indirect costs are also included. 

To use these teardown costs to estimate the non-battery costs of vehicle across the three vehicle groups for the *fleetEffSim* model, costs are first interpolated across the required time period, and then scaled up based on vehicle characteristics to reflect the larger size and power of other vehicles on the market (following ICCT methodology). 

UBS costs provide data for 2021 and 2025 years, similarly to the ICE cost curve data discussed earlier. In order to generate costs for year 2021 to 2025, costs were linearly interpoalted. Again, similar to the interpolation of ICE data, this is likely to be a conservative approach to estimating the learning curve of component costs over this time-frame. Beyond 2025, due to uncertainty, it is assumed that direct costs freeze at their 2025 levels and do not fall any further. This assumption is *highly* conservative - it is almost certain costs will, to a degree, continue to fall as electric vehicle technology progresses and the industry matures. This creates a more conservative estimate of EV costs beyond 2025. 

Electric vehicle cost decreases beyond 2025 are therefore not due to these component cost decreases, but are forecast due to a decrease in battery costs, and indirect costs (discussed later in this chapter). 


Although the UBS vehicle component cost estimates are some of the most comprehensive estimates available, and have been widely used, they only apply to a small passenger vehicle. In order to estimate costs for the three vehicle categories required fro the *fleetEffSim* model, these costs require scaling to the appropriate class. ICCT methodology in scaling vehicle costs was followed to generate these costs, with adjustments made for difference in vehicle classes used in the ICCT methodology.

The basic methodology used to scale costs to different segments is relatively simple: powertrain costs are scaled upwards by vehicle power data, direct assembly costs are scaled based on vehicle footprint, and indirect costs are determined as a proportion of all other costs, as determined and forecast by UBS. The factors used for scaling costs are taken from the ICCT, who determiend factors based on the US vehicle fleet profile. Given that vehicles in the US tend to be on average larger and more powerful than Australian vehicles, these scaling factors are likely to be conservative - overestimating the costs of electric vehicles for larger vehicle segments in particular. 

Further, as the ICCT uses the categories: SUV, crossover and passenger, as compared to the categories SUV, LCV and passenger used in the *fleetEffSim* model, the scaling factors for categories in this model as calculated as weighted averages betwen the ICCT figures. This is particularly with relevance to the SUV and crossover categories, which are both included in the *fleetEffSim* SUV category. Values for this category are therefore calculated by taking a sales weighted average of the ICCT crossover and SUV data, using sales proportions of 20% for crossover vehicles and 15% for SUVs (based o 2019 new Australian vehicle sales figures). 

For further details, see the R scripts calculating these costs, and the ICCT paper:  (https://theicct.org/sites/default/files/publications/EV_cost_2020_2030_20190401.pdf)


The assumptions that were made are as follows: 

1. Electric powertrain costs are scaled by the ratio of vehicle power in the US fleet:
  * ICCT scaling: 47\% for large SUV's, no scaling for crossover or passenger vehicles
  * Once SUV/Crossover combined, this gives ( 0.15 x 47 + 0.2 x 0 ) = 19% scaling for all SUV's. This gives passenger (0%       scaling), SUV (19% scaling) for out estimate

1. Conventional powertrain costs are similarly scaled by power ratios:
  * Scaled 18% for passenger vehicles and crossovers, 42% for SUVs. Note that the differences in scaling factors for            conventional and electric powertrains are based on the power differences between the passenger and electric vehicles used in    the teardown study to estimate costs, as the scaling factor is calculated as the: (average vehicle characteristic) / (teardown vehicle characteristic). 

1. Direct costs (assembly) are scaled based on the ratio of vehicle footprint size
  * Scaled 12.5% for SUVs category, and 6% for passenger

1. Indirect costs:
  * Conventional vehicle: held constant at 20.5% of other total costs
  * Electric vehicles: assumed as 38.5% in 2017, falling to 14% in 2025. Beyond 2025 they are held constant at the absolute     $2025 figure (rather than a proportion). 

As the ICCT does not provide an estimate for LCV's, and there is a lack of publicly available data to estimate costs, they are assumed to have costs 20% greater than the SUV category. Further, as discussed further in this chapter, battery costs for LCV's are estimated in a very conservative fashion to account for range, towing and other requirements. 


### Battery costs

To estimate battery costs over time, a combination of EPA data and ICCT assumptions are used, as well as 'scaling' to ensure that the eletric vehicle has adequate range. First, EPA data from the OMEGA model is used to estimate a base year cost for each vehicle type. This cost is then scaled to an appropriate batery capacity, and estimated to decrease at a rate of 7%/year, in line with ICCT and other industry estimates. 

The base costs provided by the US EPA in the OMEGA model are available here: (https://www.mdpi.com/2032-6653/9/3/42 page 8). This data provides battery cost forecasts for 6 vehicle types, where the types are seperated based on vehicle curb weight. Only data for BEV-200 mile was used in this analysis. The six classes (labelled class 1-6), correspond closely to the following vehicle classes: 
1.     1 - small car
1.     2 - standard car
1.     3 - large car
1.     4 - small MPV
1.     5 - large MPV
1.     6 - truck

In order to aggregate these costs into the classes used in this analysis (passenger, LCV, SUV), we take sales weighted average of battery costs using the proportions discussed earlier in the creation of ICE cost curves.  
I.e.

|  Vehicle type       |   EPA type                              |   Type weighting (sales based)    |
|:--------------------|:----------------------------------------|:----------------------------------|
| 1 - small car       |     corresponds to EPA type 1 -         |    weight = 0.0793 (passenger)    |
| 2 - standard car    |     corresponds to EPA type 2 -         |    weight = 0.188  (passenger)    |
| 3 - large car       |     corresponds to EPA type 4 and 6 -   |    weight = 0.023  (passenger)    |
| 4 - small MPV       |     corresponds to EPA type 7 -         |    weight = 0.206 (suv)           |
| 5 - large MPV       |     corresponds to EPA type 8 -         |    weight = 0.153 (suv)           |
| 6 - truck           |     corresponds to EPA type 11 and 13 - |    weight = 0.351 (lcv)           |
     

It is also assumed that from the US costs used, all EV vehicles are initially assumed to be BEV-200 (mile) vehicles, with approximately the following battery sizes:

  passenger : ~45kWh
  suv       : ~60kWh

No EPA data is provided for class 6 (LCV's). 

However, compared to many other estimates and the vehicles available on the market, these EPA figures provide relatively small battery capacities for some vehicles, particularly those in the SUV and LCV categories. This is particularly true given that the expected range a consumer may consider in these categories is likely to exceed 200 miles in many cases.

In practice, electric suv's are consistently being sold with battery capacities well above this. For example, small SUV's available have battery capacities that are routinely above the estimated 60kWh, such as the small suv hyundai kona has a capacity of 64 kWh. Larger, more expensive SUV's such as the Telsa model X, Jaguar I-PACE, Mercedes EQC have batteries of in 80-100 kWh. To account for this, data for the *fleetEffSim* uses battery costs that are scaled upwards to account for larger esimated battery sizes. The approximate battery sizes used (after cost scaling) are listed below. The battery size for LCV's is very large to reflect potential requirements for power, towing and range in this segment. 

| Vehicle type  | Assumed battery capacity                                                   |
|:--------------|:---------------------------------------------------------------------------|
|  passenger    | ~45kWh (no change)                                                         |
|  SUV          | ~85kWh                                                                     |
|  LCV          | ~110kWh (cost calculated by scaling SUV battery cost to meet 110kWh size)  |
  

The base EPA battery costs provided in the OMEGA model data are scaled linearly by the ratio of the updated battery size / the EPA provided battery size. Details on battery sizes estimated for each vehicle class in the EPA OMEGA data is provided here: (https://www.mdpi.com/2032-6653/9/3/42 page 8). Again, using higher costs is likely to result in a more conservative estimate of electric vehicle price parity. 

Over time, the price of batteries is expected to fall. In the scenario presented in the EPA OMEGA data, this decline in battery costs is expected to be approximately 4% per year. However, this is a highly conservative approach, and in practice, decreases in battery prices (and industry announcements, where available), indicate a much more rapid expected decline of battery costs. 

As a result, future battery prices are forecast based on ICCT methodology of a 7% price decrease per year. This estimate is based on a literature review of industry announcements and academic papers for future battery costs. (https://theicct.org/sites/default/files/publications/EV_cost_2020_2030_20190401.pdf). Although this estimate does not account for a slowing of battery cost decreases that is likely to occur as the industry becomes more developed, all incremental electric vehicle costs in the *fleetEffSim* model are assumed to be greater than or equal to 0. That is, at no point is it assumed that electric vehicle costs fall below ICE costs. This limits the relevance of longer term price forecasts, and it is likely that the 7% trajectory may hold within the applicable time period. 


To provide a final cost estimate for EV's, these battery costs are aggregated with the other direct and indirect costs discussed above.

All of the cost curves discussed in this chapter so far are included in the variable `cost_curves` included in the *fleeEffSim* model. 


## Further inputs for the compliance cost model

The above material covers one of hte more significant inputs in the *fleetEffSim* model, the technology cost curves. However, there are many other input assumptions made that are key to the model. This section outlines the other key inputs for the cost side of the model; that is, inputs used in the `compliance_cost()` function.  


### Existing technology estimates 

The cost curves discussed earlier in this chapter provide an estimate of the cost associated with technologies to reduce the emissions intensity of vehicles, by segment. However, it is important to note that these costs apply to a base level vehicle - that is, a vehicle that does not have any technology to reduce emissions already incorporated in it. This is approximately equivalent in spec to a base 2008 model, petrol engine vehicle with an I4 engine. Due to the prevalence of emissions standards overseas, and to some extent, consumer concerns surrounding running costs, most vehicle available on the Australian market today already have a level of technology present. 

To account for this, an estimate of the existing technology in the Australian vehicle fleet is needed. If this was not account for, technologies may in essence be 'double counted' -- i.e., technology packages may be applied to a vehicle which already has the technology incorporated,providing an upgrade that is lower cost than realistic. 

This issue can also be thought about in terms of where each vehicle 'starts' on the ICE cost curves disussed earlier in this chapter. The *fleetEffSim* model treats existing technology in this way, assuming that the existing technology applied to vehicles is the lowest cost upgrades available. 

This assumption is unlikely to necessarily hold true. While some existing technology in vehicles may be at the low point of the, other technologies may reflect consumer preferences for specific engine or transmission technology, or fuel type and drive train. Assuming all existing technology is taken from the lowest points of the cost curves is a highly conservative assumption that is likely to lead to an overestimation of the costs of technology remaining and available to be applied to vehicles to reduce emissions. 

So how do we estimate this 'starting point' in the *fletEffSim* model? 

The technology starting point is first estimated for petrol vehicles, by tracking the changes in emissions since 2008. Given that the base model vehicle assumed in the technology cost curves is approximately equivalent to a vehicle of these specifications, tracking the changes in emissions from 2008 onwards in each vehicle category provides an estimate of the % CO2 reduction already achieved by adding new technologies to the base engine. 

Given that the base engine is assumed to be a petrol engine, an adjustment is then made for the proportion of diesel vehicles in each category based on 2008 levels. This is as a base diesel engine is more efficient than a base petrol engine, and thus reflects an 'upgrade'. It is assumed that the upgrade from a base petrol to diesel engine is equivalent to a 16% reduction in emissions, based on ABMARC (2016) data (https://www.infrastructure.gov.au/vehicles/environment/forum/files/Vehicle_Fuel_Efficiency_RIS.pdf, page 22).

The proportion of diesel sales was calculated from: https://fleetautonews.com.au/new-car-sales-by-fuel-type-fleet-buyers, and the improvements since 2008 obtained from national transport commissions yearly emissions intensity report data. 

The total adjusted figure was determined as :
``` 
(proportion diesel * 16/100) + % change since 2008

```

The following table outlines the values determined: 

| Vehicle type        | % Change since 2008       |   Proportion diesel (2008 levels)     | Total adjusted 'existing tech' (% improvement)        |  
|---------------------|:--------------------------|:--------------------------------------|:------------------------------------------------------|
|Passenger            |   21%                     |       6%                              |   22%
|SUV                  |   21%                     |       30.4%                           |   26%
|LCV                  |   13.2%                   |       59.9%                           |   18%

These final values are used in the variables, `.suv_existing_tech `, ` .passenger_existing_tech`, and ` .lcv_existing_tech` as their default inputs. However, they can be changed by the user. 

Note that data on passenger and SUV vehicle efficiency improvement from 2008 is only available as an aggregated category. As a result, it is assumed that this improvement is equal between categories. 




### BAU Emissions trajectories

In order to estimate the additional compliance cost (and benefit) imposed by a fleet wide standard, it is important to produce a comparative estimate of the expected emissions trajectory under the business as usual (BAU) case where no standard is in place. This means all costs and benefits estimated are additional compared to the base case. 

The BAU case is estimated as a emissions trajectory. This emissions trajectory is then used in the *fleetEffSim* model as if it were a 'target' to be applied to the fleet. Doing so means that the BAU emissions trajectory estimated by the model does **not** correspond to a prediction of the EV or technology uptake likely to occur. Instead, it is the lowest cost pathway to meeting a likely emissions trajectory. It is important that this pathway is also lowest cost, and not 'most likely', as it allows for a fair comparison with the lowest cost pathway outputs determined by the *fleetEffSim* model under an emissions target. 

The BAU scenario is determined by combining a forecast of EV takeup with a forecast of non-ev emissions across new vehicle sales. The emissions are combined to provide an emissions 'trajectory' under a no-target scenario. 

EV uptake forecasts were taken from 2018 ARENA estimates: https://arena.gov.au/assets/2018/06/australian-ev-market-study-report.pdf under the 'no intervention' scenario. 

The non-ev component of the fleet is assumed to decline in emissions intensity by 1.5% annually. This is in line with longer term historical declines, and represent a faster improvement than has been achieved in the past 5 years. 

The bau scenario is included in the `targets_and_bau` tableincluded in the *fleetEffSim* model, and is specified by the XX variable. 


```{r, echo = FALSE}
targets_and_bau %>% 
  filter(target_type == "bau") %>% 
  ggplot() +
  geom_line(aes(x = year, y = value)) +
  theme_grattan() +
  labs(title = "The assumed emissions trajectory under business as usual",
       subtitle = "Average emissions of new vehicle sales (CO2g/km) over time",
       x = "Year")

```


### Target trajectory

The `targets_and_bau` files also includes 3 different target trajectories that may be used with the *fleetEffSim* model. However, users can also run their own targets, by specifying the scenario with the `.target_scenario` variable for the `compliance_cost()` function, or the `.in_target_scenario` variable for the `fleet_eff_sim()` function. The options include "linear", "ambitious", and the default argument, "central". Each represents a different emissions standard trajectory, all of which reach net zero by 2035. 



# Benefit Variables 

To this point, this chapter has discussed variables used in the cost side of the *fleetEffSim*, which are used to estimate the compliance costs for manufacturers of meeting targets. As chapter 3 details, this is part of the `compliance_cost()` function, and through this, the `fleet_eff_sim()` function. 

However, many more variables are used as assumptions in the *fleetEffSim* model to estimate the benefits accrued through an emissions standard. This includes: 
1. Distance travelled per year (`km_travelled`), including a rebound effect and vehicle life estimates
2. Future fuel prices (`fuel_prices`)
3. Future electricity prices (`electricity_prices`)
4. Future energy consumption of electric vehicles (`energy_consumption`)
5. The future energy intensity of the electricity grid (`energy_intensity`)
6. The real world and test cycle emissions 'gap' 
7. The proportions of vehicles that run on different fuels, including diesel and premium fuels

The assumptions underpinning each of these variables is discussed below. 



### Distance travelled per year

To estimate the benefits of a vehicle emissions standard accrued through fuel cost savings, an assumption of how far is driven each year is required. The *fleetEffSim* model uses ABS motor vehicle use survey data to estimate how far a given vehicle drives each year, based on the vehicle type and age. Further, a rebound effect is included (with an elasticity of 0.1%). This data is contaied in teh `km_travelled` variable. 

The Motor Vehicle Use survey (ABS) provides data on the average user-reported distance traveled for passenger vehicles and light commercial vehicles. This data is also discretely broke down by vehicle age (in interval blocks based on registration). It is clear that over time, the distance driven in a given vehicle changes. Older vehicles tend to be driven a far lower distance compared with newer vehicles. The type of vehicle also matters - light commercial vehicles tend to travel further in a given year. 

To account for these factors in the model, the ABS data was used to plot a linear relationship between distance traveled and vehicle age for the two specified vehicle types (passenger and light commercial vehicle). The linear relationship is truncated at 17 years, where it is assumed a vehicles is no longer driven. This method of dealing with vehicle survival rates is relatively simple, compared to other methods that use survival curves and distance driven to create a distribution of vehicle 'death' ages. However, the differences are likely to have only a marginal effect on results, and there is signifciant uncertainty regarding the lifespan of electric vehicles in the future. 

The resulting data is plotted below:

``` {r, echo = FALSE}
km_travelled %>% 
  ggplot() +
  geom_line(aes(x = age, y = km_travelled, colour = vehicle_type)) +
  scale_x_continuous_grattan(limits = c(0, 17)) +
  theme_grattan(legend = "top") +
  labs(title = "The assumed distance driven by vehicle type and age",
       subtitle = "Yearly km driven",
       x = "Vehicle age",
       y = "Yearly km driven",
       caption = "Note that because distance is assumed equal for passenger and SVU types, the lines are on top of each other and therefore not both visible") +
  grattan_colour_manual()
  
  

```


Given that the data is not disaagregated between passenger and SUV vehicle types, the 'passenger' curve is assumed to apply to both passenger and SUV vehicles. 

A rebound effect is also used in the *fleetEffSim* model, to account for how changes in vehicle running cost have previously been found to effect driving behaviour. When running costs of vehicles become cheaper, it is unsurprising that drivers have been found to drive, on average, further. This effect is known as a 'rebound' as a result of the low running costs. Typical estimates estimate a rebound elasticity of approximately 0.1-0.2, meaning that if running costs become 10% cheaper for a given vehicle, a given consumer is likely to drive 1-2% further on average. The *fleetEffSim* model uses a rebound elasticity of 0.1. 


### Future fuel prices 

There is significant uncertainty in the future price of fuel, which is primarily a factor of future oil prices. To account for the uncertainty in forecasting fuel prices a far into the future, the inputs to the *fleetEffSim* model under the central estimate assume that fuel prices remain constant. This is is line with longer term real fuel costs that demonstrate fluctuations around a relatively steady price, as outlined by the ACCC: https://www.accc.gov.au/system/files/20-27RPT_Petrol%2520Quarterly%2520Report%2520-%2520June%25202020_FA.pdf. 

The fuel costs used in the *fleetEffSim* model are not consumer level fuel costs. Instead, they are stripped consumer level fuel costs, minus taxes applied to fuel (GST and fuel excise). Information regarding fuel taxation can be found here: https://data.gov.au/data/dataset/excise-data/resource/b9227cdf-4c04-492d-bd84-65031adc408e. This is due to the fact that the *fleetEffSim* model represents a society-level scenario, and not a consumer level scenario. Although consumers may pay taxes in their fuel, incurring a cost, this is a net-transfer to government. Thus, a requirement for less fuel also generates less revenue for government. 

The fuel price for 91-octane under the central scenario is assumed to remain steady at \$0.913/L (without taxes). Data on the price difference between octane-91 , 95 and 98 was tken from RACV data: https://www.racv.com.au/royalauto/moving/news-information/premium-petrol-guzzling-cash.html. Under a central scenario, diesel is assumed to remain steady at \$0.967/L, oct-95 at \$0.990/L, and oct-98 at \$1.04/L. 

The significant uncertainty in future fuel prices is dealt with through sensitivity testing. Two other scenarios are included in the `fuel_prices` data, under the `scenario` variable. This includes a `low_price` and `high_price` estimate. The low price estimate assumes the same initial 2021 costs as the central estimate, however prices fall by 1% annually between 2021 and 2050. For oct-91, this results in a 2050 price of \$0.668/L. The `high_price` estimate assumes fuel prices rise by 1% annually. For oct-91, this results in a 2050 price of \$1.24/L. 


### Vehicle fuel types  

Of new vehicle sales in Australia, in a given year a proportion of vehicles are sold designed to run on fuels aside from octane-91 petrol. These alternative fuels, such as diesel or premium blends, have different costs and may translate to different performance. 

The RACV estimates that approximately 20 % of new vheicles sold run on premium fuel (https://www.racv.com.au/royalauto/moving/news-information/premium-petrol-guzzling-cash.html) (as of 2019). In the *fleetEffSim* model, it is assumed (through the default arguments of the variables ` .in_premium_95` and `.in_premium_98`) that 15% of non-electric vehicles run on octane 95 fuel, and 5% run on octane-98 or other premium blend fuel. These proportions are held constant across BAU and target trajectories in all years, given the high uncertainty surrounding how emissions standards may effect these figures. 

The proportion of vehicles assumed to run on diesel is determined based on data from: https://fleetautonews.com.au/new-car-sales-by-fuel-type-fleet-buyers, and is dependent on vehicle type. the arguments `.in_passenger_diesel`, `.in_suv_diesel` and `.in_lcv_diesel` specify the diesel proportions in each segment and can be changed by the user, however have the default arguments (as a proportion) of 0.02, 0.21 and 0.92 respectively. 


### Future electricity prices

Similarly to fuel price forecasts, there is significant uncertainty in future consumer level electricity prices. This is particularly true given the large daily and weekly variation in electricity costs (based on peak/off-peak usage times), and the uncertainty around charging behaviour of users with electric vehicles. 

To account for this, the 'central' scenario assumes a conservative future electricity price of /$0.27kW to remain steady. Although this forecast is in line with current average electricity prices (as outlined here: 
https://www.aemc.gov.au/sites/default/files/2020-12/2020%20Residential%20Electricity%20Price%20Trends%20report%20-%2015122020.pdf), it is likely to exceed actual prices used for vehicle charging. This is because it is likely that vehicle charging will predominantly occur at off peak times, such as overnight, where prices tend to be lower. A conservative estimate of future electricity prices underestimates the benefits of an emissions standard policy. 

Like for future fuel prices, options for sensitivity testing are included in the *fleetEffSim* model, under the `scenario` variable in the `electricity_price` data. Alternative scenarios included are `high_price`, where electricity prices are assumed to increase by 2% per year to 2031, before remaining steady; a low price scenario, where prices are assumed to drop by 1% per year to 2030, before remaining steady, and an `off_peak` charging scenario, where prices are assumed to remain steady at $0.20kW over the entire forecast period.  

Through the `fleet_eff_sim()` function, the scenario can be specified using the ` .in_electricity_scenario` variable (default is "central"). In the `benefit_model()` function, the scenario can be specified by `.electricity_scenario`.



### Future electricity consumption of electric vehicles 

To determine how much electricity is used by an electric vehicle, and thus the running costs for that vehicle, an estimate of EV energy consumption must be included in the model. This variable is assumed to vary by vehicle type, over time, with the rates of change over time assumed to broadly follow ICCT estimates (https://theicct.org/sites/default/files/publications/EV_cost_2020_2030_20190401.pdf). 

The ICCT provides estimates of electric vehicle energy consumption in the years 2018 and 2030. Similarly to the estimates made in scaling vehicle costs, the data provided by the ICCT does not perfectly fit into the categories used by the *fleetEffSim* model. As a result, a sales weighted average of the ICCT categories corresponding to crossover and SUV vehicles is used to determine the energy consumption for SUV vehicle in this model. The weights used are 20 for crossover vehicles, and 15 for SUV's. 

Once weighted and converted from kWh/mile to kWh/km, the values provided are as follows:

| type        |   2018 kWh/mile    |  2030 kWh/mile  |
|:------------|:-------------------|:----------------|
| passenger   |   0.186            |  0.17           |
| suv         |   0.26             |  0.24           |


Given the *fleetEffSim* requires an energy consumption value for all years, not only 2018 and 2030, these values are used to esimate a rate of change for energy consumption over time, corresponding to -0.00133kWh/year for passenger vehicles, and -0.00166kWh/year for SUVs.

To follow the conservative approach of the *fleetEffSim* model, a value of -0.0015kWh/year is used to estimate the change in energy consumption of SUVs over time, and -0.001kWh/year for passenger vehicles. It is also assumed that this rate of improvement only continues to 2030, beyond which the energy consumption remains stable. This is also used to account for a likely continuing trend towards consumer buying larger vehicles, with high energy demands. Given there is a lack of data for LCV vehicles, it is assumed that LCV vehicles require the same energy consumption as SUV vehicles. 



### Future emissions intensity of the electricity grid 

Although the bulk of emissions from vehicles are likely to come from ICE vehicles, it is important to factor in the emissions created through electricity generation to power EV vehicles into the model. To do so, the *fleetEffSim* model uses the AEMO "step change" scenario to estimate the emissions intensity of the electricity grid. Although this scenario only applies to the NEM, given this covers the vast majority of vehicle users, it is used to estimate the trajectory for all Australians. 

Further, the AEMO figures only include projections to 2040. Beyond this point, it is assumed that the electricity continues to decarbonise on a linear trajectory from the emissions intensity level in the final year of AEMO data, to 0 gCO2/kWh in 2050. 


### Real world and test cycle emissions 'gap'

Internationally, emissions test cycles uhave routinely been used to enforce vehicle emissions standards. However, as manufacturers have aimed to meet their targets, they tended to optimise their vehicle performance for the test cycle, as opposed to real world driving conditions. The result is that a 'gap' has emerged between test cycle CO2 figures and real world driving conditions, which reduce the amount of CO2 abated from vehicle emissions standard policies. 

This has been extensiely documented by various groups, including the ICCT in their 'laboratory to road' series (https://theicct.org/series/laboratory-road). The gap for the emissions cycle test used throughout Europe, the 'New European Driving Cycle (NEDC)' has risen substantially over the past decade, leading to a switch in testing model to the more rigorous World harmonised Light vehicle Testing Procedure (WLTP). the switch to the testing procedure has reduced the expected gap between real world and test cycle emissions. Over the coming years, Australia is also likely to adopt the WLTP test cycle to enforce compliance with any emissoins policies introduced. 

Although estimates of the gap under the WLTP cycle have a wide range of variability, this model uses a default argument of a 20% gap, as specified by the `.in_gap` variable in the `fleet_eff_sim()` function, or the `.gap` variable in the `benefit_model()` function. For this variable, a 20% gap corresponds toa figure of 1.2, and 30% to 1.3 etc. This figure can be changed by the user to reflect the uncertainty, and should be used for sensitivity testing. 



# Chapter 3: Functions in the fleetEffSim model


